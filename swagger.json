{"openapi":"3.0.0","paths":{"/api/v1/contract":{"post":{"operationId":"ContractController_create","summary":"Create a new contract.","description":"Create a new contract.","parameters":[],"requestBody":{"required":true,"description":"Create a new contract in the store.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateContractDto"},"examples":{"a":{"summary":"Default example","description":"This example creates a contract in the BW area in Germany.","value":{"priceInCents":34.5678,"currency":"EUR","unit":"kWh","contractType":"ELECTRICITY","location":{"country":"Germany","countryCode":"DE","regionName":"Baden-Württemberg","regionCode":"BW"},"termEnd":0}}}}}},"responses":{"201":{"description":"Resource created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ContractResponseDto"}}}},"400":{"description":"Invalid input"},"403":{"description":"Invalid API Key"},"409":{"description":"Contract already exists"}},"tags":["contract"],"security":[{"api-key":[]}]}},"/api/v1/contract/{contractId}":{"put":{"operationId":"ContractController_update","summary":"Update an existing contract by id.","description":"Update an existing contract by id.","parameters":[{"name":"contractId","required":true,"in":"path","description":"The globally unique id of the contract to update.","allowEmptyValue":false,"schema":{"format":"uuid","type":"string"}}],"requestBody":{"required":true,"description":"Update an existing contract in the store.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateContractDto"},"examples":{"a":{"summary":"Default example","description":"This example creates a contract in the BW area in Germany.","value":{"priceInCents":34.5678,"currency":"EUR","unit":"kWh","contractType":"ELECTRICITY","location":{"country":"Germany","countryCode":"DE","regionName":"Baden-Württemberg","regionCode":"BW"},"termEnd":0}}}}}},"responses":{"200":{"description":"Successful operation","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ContractResponseDto"}}}},"400":{"description":"Invalid input"},"403":{"description":"Invalid API Key"},"500":{"description":"Failed to update resource"}},"tags":["contract"],"security":[{"api-key":[]}]},"delete":{"operationId":"ContractController_remove","summary":"Delete an existing contract by id.","description":"Delete an existing contract by id.","parameters":[{"name":"contractId","required":true,"in":"path","description":"The globally unique id of the contract to delete.","allowEmptyValue":false,"schema":{"format":"uuid","type":"string"}}],"responses":{"200":{"description":"Successful operation","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ContractResponseDto"}}}},"400":{"description":"Invalid input"},"403":{"description":"Invalid API Key"},"404":{"description":"Resource to delete was not found"}},"tags":["contract"],"security":[{"api-key":[]}]}},"/api/v1/statistics/{contractType}/{countryCode}":{"get":{"operationId":"StatisticsController_getStatisticsForCountry","summary":"Compute statistics from countryCode and contractType aggregation.","description":"Returns statistics by type for a country.","parameters":[{"name":"countryCode","required":true,"in":"path","description":"The country code in which the aggregated contracts are based in.","allowEmptyValue":false,"schema":{"type":"string"}},{"name":"contractType","required":true,"in":"path","description":"The contractType of the aggregated contracts are based in.","allowEmptyValue":false,"schema":{"type":"string","enum":["ELECTRICITY","GAS","WATER_COLD","WATER_WARM"]}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object"}}}},"204":{"description":"Not enough contracts to compute statistics"},"400":{"description":"Invalid input"},"403":{"description":"Invalid API Key"}},"tags":["statistics"],"security":[{"api-key":[]}]}},"/api/v1/statistics/{contractType}/{countryCode}/{regionCode}":{"get":{"operationId":"StatisticsController_getStatisticsForRegion","summary":"Compute statistics from regionCode, countryCode and contractType aggregation.","description":"Returns statistics by type for a region within a country.","parameters":[{"name":"regionCode","required":true,"in":"path","description":"The region in the country in which the aggregated contracts are based in.","allowEmptyValue":false,"schema":{"type":"string"}},{"name":"countryCode","required":true,"in":"path","description":"The country in which the aggregated contracts are based in.","allowEmptyValue":false,"schema":{"type":"string"}},{"name":"contractType","required":true,"in":"path","description":"The contractType of the aggregated contracts are based in.","allowEmptyValue":false,"schema":{"type":"string","enum":["ELECTRICITY","GAS","WATER_COLD","WATER_WARM"]}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object"}}}},"204":{"description":"Not enough contracts to compute statistics"},"400":{"description":"Invalid input"},"403":{"description":"Invalid API Key"}},"tags":["statistics"],"security":[{"api-key":[]}]}}},"info":{"title":"Consumption and prices","description":"Statistics about consumption and prices","version":"1.0.0","contact":{"name":"Contact the developer","url":"","email":"info@ehwplus.com"},"termsOfService":"http://swagger.io/terms/","license":{"name":"Apache 2.0","url":"http://www.apache.org/licenses/LICENSE-2.0.html"}},"tags":[{"name":"contract","description":"Everything about a single contract."},{"name":"statistics","description":"Access to statistics by type."}],"servers":[{"url":"http://localhost:8080"},{"url":"https://statistics.ehwplus.com"}],"components":{"securitySchemes":{"api-key":{"type":"apiKey","in":"header","name":"X-API-KEY"}},"schemas":{"CreateLocationDto":{"type":"object","properties":{"country":{"type":"string"},"countryCode":{"type":"string"},"regionCode":{"type":"string"},"regionName":{"type":"string"}},"required":["country","countryCode","regionCode","regionName"]},"CreateContractDto":{"type":"object","properties":{"contractId":{"type":"string"},"contractType":{"type":"string","enum":["ELECTRICITY","GAS","WATER_COLD","WATER_WARM"]},"currency":{"type":"string","enum":["EUR","DOLLAR","GBP","CHF","TRY","RUB","UAH","PHP"]},"unit":{"type":"string","enum":["kWh","Mwh","m3","liter"]},"location":{"$ref":"#/components/schemas/CreateLocationDto"},"priceInCents":{"type":"number","minimum":0},"termEnd":{"format":"date-time","type":"string"}},"required":["contractType","currency","unit","location","priceInCents"]},"LocationResponseDto":{"type":"object","properties":{"country":{"type":"string"},"countryCode":{"type":"string"},"regionCode":{"type":"string"},"regionName":{"type":"string"}},"required":["country","countryCode","regionCode","regionName"]},"ContractResponseDto":{"type":"object","properties":{"contractId":{"type":"string"},"contractType":{"enum":["ELECTRICITY","GAS","WATER_COLD","WATER_WARM"],"type":"string"},"currency":{"enum":["EUR","DOLLAR","GBP","CHF","TRY","RUB","UAH","PHP"],"type":"string"},"unit":{"enum":["kWh","Mwh","m3","liter"],"type":"string"},"location":{"$ref":"#/components/schemas/LocationResponseDto"},"priceInCents":{"type":"number","minimum":0},"termEnd":{"type":"number"}},"required":["contractId","contractType","currency","unit","location","priceInCents"]},"UpdateContractDto":{"type":"object","properties":{"contractId":{"type":"string"},"contractType":{"type":"string","enum":["ELECTRICITY","GAS","WATER_COLD","WATER_WARM"]},"currency":{"type":"string","enum":["EUR","DOLLAR","GBP","CHF","TRY","RUB","UAH","PHP"]},"unit":{"type":"string","enum":["kWh","Mwh","m3","liter"]},"location":{"$ref":"#/components/schemas/CreateLocationDto"},"priceInCents":{"type":"number","minimum":0},"termEnd":{"format":"date-time","type":"string"}}}}},"externalDocs":{"description":"Find out more about Swagger","url":"http://swagger.io/"}}